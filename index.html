<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Generated-Pages</title>
  <style>
    * { box-sizing: border-box; }
    body { font-family: Arial, sans-serif; margin: 0; background: #f7f7f7; }
    .container {
      display: flex;
      width: 100vw;
      height: 100vh;
    }
    .sidebar {
      background: #fff;
      padding: 2em 1em 2em 2em;
      box-shadow: 2px 0 8px rgba(0,0,0,0.03);
      min-width: 270px;
      max-width: 370px;
      width: 370px;
      border-right: 1px solid #eee;
      height: 100vh;
      overflow-y: auto;
      transition: max-width 0.2s;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;
    }
    .sidebar.narrow {
      max-width: 370px;
      width: 370px;
    }
    h1 {
      color: #333;
      font-size: 1.4em;
      margin-bottom: 1.5em;
      margin-top: 0;
      width: 100%;
      word-break: break-all;
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      width: 100%;
    }
    li {
      padding: 8px 0;
      width: 100%;
      display: flex;
      align-items: center;
      border-bottom: 1px solid #f0f0f0;
    }
    a {
      text-decoration: none;
      color: #0074d9;
      font-size: 1em;
      cursor: pointer;
      width: 100%;
      display: inline-block;
      padding: 6px 0;
      transition: background 0.2s;
      border-radius: 4px;
    }
    a:hover {
      background: #e6f7ff;
      text-decoration: underline;
    }
    .html-icon::before { content: "üåê "; }
    .viewer {
      flex: 1 1 0%;
      height: 100vh;
      background: #f7f7f7;
      display: flex;
      align-items: stretch;
      justify-content: stretch;
    }
    #iframe-viewer {
      width: 100%;
      height: 100vh;
      border: none;
      background: #fff;
      box-shadow: -2px 0 8px rgba(0,0,0,0.03);
    }
    .hidden {
      display: none !important;
    }
    @media (max-width: 800px) {
      .container { flex-direction: column; }
      .sidebar, .sidebar.narrow { max-width: 100vw; width: 100vw; height: auto; }
      .viewer { height: 70vh; }
      #iframe-viewer { height: 70vh; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="sidebar narrow" id="sidebar">
      <h1>HTML Pages in Generated-Pages Repository</h1>
      <ul id="file-list"></ul>
    </div>
    <div class="viewer hidden" id="viewer-container">
      <iframe id="iframe-viewer" src=""></iframe>
    </div>
  </div>
  <script>
    const owner = "Pex-duo";
    const repo = "Generated-Pages";
    const githubPagesUrl = `https://${owner}.github.io/${repo}/`;

    async function fetchRepoFiles() {
      const url = `https://api.github.com/repos/${owner}/${repo}/contents/`;
      const response = await fetch(url);
      if (!response.ok) {
        document.getElementById('file-list').innerHTML = `<li>Error loading files.</li>`;
        return;
      }
      const files = await response.json();
      const list = document.getElementById('file-list');
      list.innerHTML = "";

      files
        .filter(file =>
          file.name.endsWith(".html") &&
          file.name !== "index.html" &&
          file.type === "file"
        )
        .forEach(file => {
          const li = document.createElement('li');
          li.innerHTML = `<a class="html-icon" data-filename="${file.name}">${file.name}</a>`;
          list.appendChild(li);
        });

      // Add click event listeners for HTML files
      document.querySelectorAll('#file-list a[data-filename]').forEach(link => {
        link.addEventListener('click', function() {
          const filename = this.getAttribute('data-filename');
          openHtmlInIframe(filename);
        });
      });
    }

    function openHtmlInIframe(filename) {
      document.getElementById('viewer-container').classList.remove('hidden');
      document.getElementById('iframe-viewer').src = githubPagesUrl + filename;
      // Sidebar stays narrow, only shows file list and title
    }

    fetchRepoFiles();
  </script>
</body>
</html>
