<!DOCTYPE html>
<html lang="pl" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n-key="pageTitle">Interaktywny przewodnik: Zaawansowane łączenie modeli</title>
    <script src="https://cdn.tailwindcss.com" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        html { scroll-padding-top: 5rem; }
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #cbd5e1; }
        #shader-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.4; }
        .content-wrapper { position: relative; z-index: 1; }
        .chart-container { position: relative; width: 100%; max-width: 900px; margin-left: auto; margin-right: auto; height: 400px; max-height: 50vh; }
        @media (min-width: 768px) { .chart-container { height: 450px; } }
        .version-btn, .recipe-btn, .lang-btn { transition: background-color 0.3s, border-color 0.3s, color 0.3s, box-shadow 0.3s, transform 0.3s; transform-style: preserve-3d; }
        .card { background-color: rgba(15, 23, 42, 0.6); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-radius: 0.75rem; border: 1px solid #334155; transition: all 0.3s ease-in-out; box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1); }
        .card:hover { box-shadow: 0 0 25px -5px rgba(79, 70, 229, 0.3); border-color: #4f46e5; transform: translateY(-4px) scale(1.02); }
        .version-btn, .recipe-btn, .lang-btn { background-color: rgba(30, 41, 59, 0.8); color: #e2e8f0; border: 1px solid #475569; box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); }
        .version-btn:hover, .recipe-btn:hover, .lang-btn:hover { background-color: #3730a3; border-color: #6366f1; color: white; }
        .version-btn.active, .recipe-btn.active, .lang-btn.active { background-color: #4f46e5; color: white; box-shadow: 0 0 15px rgba(99, 102, 241, 0.5); border-color: #6366f1; }
        .dare-panel { background: linear-gradient(145deg, #1e293b, #0f172a); border: 1px solid #334155; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3); }
        .flow-arrow { font-family: monospace; font-weight: bold; }
    </style>
</head>
<body class="bg-slate-900">
    <canvas id="shader-canvas"></canvas>
    <div class="content-wrapper">
        <header class="bg-slate-900/50 backdrop-blur-lg sticky top-0 z-50 border-b border-slate-700">
            <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center">
                        <span class="font-bold text-lg text-slate-100" data-i18n-key="guideTitle"></span>
                    </div>
                    <div class="flex items-center space-x-8">
                        <div id="main-nav" class="flex items-center space-x-4 text-sm font-medium">
                            <a id="nav-blueprints" href="#sdxl-blueprints" class="text-slate-300 hover:text-white transition-colors" data-i18n-key="nav.blueprints"></a>
                            <a id="nav-recipes" href="#sdxl-recipes" class="text-slate-300 hover:text-white transition-colors" data-i18n-key="nav.recipes"></a>
                            <a href="#analysis" class="text-slate-300 hover:text-white transition-colors" data-i18n-key="nav.analysis"></a>
                            <a href="#glossary" class="text-slate-300 hover:text-white transition-colors" data-i18n-key="nav.glossary"></a>
                        </div>
                         <div class="flex items-center">
                            <button id="lang-pl" class="lang-btn active px-3 py-1 rounded-l-md text-xs font-medium">PL</button>
                            <button id="lang-en" class="lang-btn px-3 py-1 rounded-r-md text-xs font-medium">EN</button>
                        </div>
                    </div>
                </div>
            </nav>
        </header>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <section class="text-center mb-16">
                <h1 class="text-4xl md:text-5xl font-bold text-slate-100 tracking-tight" data-i18n-key="header.title"></h1>
                <p class="mt-4 text-lg text-slate-400 max-w-3xl mx-auto" data-i18n-key="header.subtitle"></p>
            </section>

            <div id="strategy-selector" class="flex justify-center flex-wrap gap-4 mb-16 p-4 bg-slate-800/50 border border-slate-700 rounded-lg shadow-inner">
                <button id="select-sdxl" class="version-btn active px-6 py-3 rounded-md text-base font-medium" data-i18n-key="strategy.sdxl"></button>
                <button id="select-pony" class="version-btn px-6 py-3 rounded-md text-base font-medium" data-i18n-key="strategy.pony"></button>
                <button id="select-hybrid" class="version-btn px-6 py-3 rounded-md text-base font-medium" data-i18n-key="strategy.hybrid"></button>
            </div>

            <div id="sdxl-content">
                <section id="sdxl-blueprints" class="mb-24 scroll-mt-20">
                    <h2 class="text-3xl font-bold text-slate-100 mb-2" data-i18n-key="sdxl.blueprint.title"></h2>
                    <p class="text-slate-400 mb-10 max-w-4xl" data-i18n-key="sdxl.blueprint.description"></p>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="card p-6 flex flex-col"><h3 class="font-bold text-lg text-slate-100">Animij [Illustrious] V5.0</h3><p class="text-sm font-medium text-indigo-400 mb-2" data-i18n-key="sdxl.blueprint.card1.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="sdxl.blueprint.card1.desc"></p></div>
                        <div class="card p-6 flex flex-col"><h3 class="font-bold text-lg text-slate-100">Graycolor SemiRealIllustMix</h3><p class="text-sm font-medium text-indigo-400 mb-2" data-i18n-key="sdxl.blueprint.card2.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="sdxl.blueprint.card2.desc"></p></div>
                        <div class="card p-6 flex flex-col"><h3 class="font-bold text-lg text-slate-100">Boomer Art Model v2.0</h3><p class="text-sm font-medium text-amber-400 mb-2" data-i18n-key="sdxl.blueprint.card3.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="sdxl.blueprint.card3.desc"></p></div>
                        <div class="card p-6 flex flex-col"><h3 class="font-bold text-lg text-slate-100">D34D.CH4NN3L.SDXL</h3><p class="text-sm font-medium text-red-400 mb-2" data-i18n-key="sdxl.blueprint.card4.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="sdxl.blueprint.card4.desc"></p></div>
                    </div>
                </section>
                <section id="sdxl-recipes" class="mb-24 scroll-mt-20">
                     <h2 class="text-3xl font-bold text-slate-100 mb-2" data-i18n-key="sdxl.recipes.title"></h2>
                     <div class="card p-6 md:p-8 mb-12">
                         <h3 class="text-xl font-bold text-slate-100 mb-4" data-i18n-key="sdxl.recipes.step1.title"></h3>
                         <p class="text-sm text-slate-400 mb-6" data-i18n-key="sdxl.recipes.step1.desc"></p>
                         <div class="flex justify-center flex-wrap gap-4 mb-6" id="sdxl-recipe-buttons">
                            <button data-recipe="balanced" class="recipe-btn active px-4 py-2 rounded-md text-sm font-medium" data-i18n-key="sdxl.recipes.step1.btnBalanced"></button>
                            <button data-recipe="host_dominant" class="recipe-btn px-4 py-2 rounded-md text-sm font-medium" data-i18n-key="sdxl.recipes.step1.btnHost"></button>
                            <button data-recipe="donor_receptive" class="recipe-btn px-4 py-2 rounded-md text-sm font-medium" data-i18n-key="sdxl.recipes.step1.btnDonor"></button>
                         </div>
                         <div id="sdxl-recipe-explanation" class="mb-6 p-4 bg-indigo-900/30 border border-indigo-500/50 text-indigo-200 rounded-md text-sm"></div>
                         <div class="chart-container lazy-chart" id="sdxlChartContainer"><canvas id="sdxlChart"></canvas></div>
                         <div id="sdxl-justification" class="mt-6 p-4 bg-slate-800 rounded-md text-sm text-slate-400 min-h-[60px]" data-i18n-key="chart.hoverPrompt"></div>
                     </div>
                     <div class="card p-6 md:p-8 mb-12">
                         <h3 class="text-xl font-bold text-slate-100 mb-4" data-i18n-key="sdxl.recipes.step2.title"></h3>
                         <p class="text-sm text-slate-400 mb-6" data-i18n-key="sdxl.recipes.step2.desc"></p>
                         <div class="grid md:grid-cols-1 gap-8">
                             <div class="dare-panel">
                                 <h4 class="font-bold text-lg text-slate-200 mb-4 text-center" data-i18n-key="sdxl.recipes.step2a.title"></h4>
                                 <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
                                     <div>
                                         <h5 class="text-sm font-semibold text-indigo-300 mb-2" data-i18n-key="dare.trim.title"></h5>
                                         <p class="text-xs text-slate-400 mb-4" data-i18n-key="sdxl.recipes.step2a.trimDesc"></p>
                                         <p class="text-xs"><strong class="text-slate-300">model_a:</strong> <span data-i18n-key="dare.hostFromStep1"></span></p>
                                         <p class="text-xs"><strong class="text-slate-300">model_b:</strong> sd_xl_base_1.0</p>
                                         <p class="text-xs"><strong class="text-slate-300">threshold:</strong> 0.60</p>
                                         <p class="text-xs"><strong class="text-slate-300">threshold_type:</strong> quantile</p>
                                     </div>
                                     <div>
                                         <h5 class="text-sm font-semibold text-amber-300 mb-2" data-i18n-key="dare.merge.title"></h5>
                                         <p class="text-xs text-slate-400 mb-4" data-i18n-key="dare.merge.desc"></p>
                                         <p class="text-xs"><strong class="text-slate-300">model1:</strong> <span data-i18n-key="dare.hostFromStep1"></span></p>
                                         <p class="text-xs"><strong class="text-slate-300">model2:</strong> Boomer Art Model</p>
                                         <p class="text-xs"><strong class="text-slate-300">base_model:</strong> sd_xl_base_1.0</p>
                                         <p class="text-xs"><strong class="text-slate-300">density:</strong> 0.45</p>
                                         <p class="text-xs"><strong class="text-slate-300">ties_mode:</strong> sum</p>
                                     </div>
                                 </div>
                                 <div class="mt-6 pt-4 border-t border-slate-700">
                                     <h5 class="text-sm font-semibold text-slate-300 mb-2" data-i18n-key="dare.justification"></h5>
                                     <p class="text-xs text-slate-400" data-i18n-key="sdxl.recipes.step2a.justification"></p>
                                 </div>
                             </div>
                         </div>
                    </div>
                </section>
            </div>

            <div id="pony-content" class="hidden">
                 <section id="pony-blueprints" class="mb-24 scroll-mt-20">
                    <h2 class="text-3xl font-bold text-slate-100 mb-2" data-i18n-key="pony.blueprint.title"></h2>
                    <p class="text-slate-400 mb-10 max-w-4xl" data-i18n-key="pony.blueprint.description"></p>
                     <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="card p-6 flex flex-col"><h3 class="font-bold text-lg text-slate-100">JANKU V4.0</h3><p class="text-sm font-medium text-indigo-400 mb-2" data-i18n-key="pony.blueprint.card1.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="pony.blueprint.card1.desc"></p></div>
                        <div class="card p-6 flex flex-col"><h3 class="font-bold text-lg text-slate-100">NEW ERA V5.0</h3><p class="text-sm font-medium text-indigo-400 mb-2" data-i18n-key="pony.blueprint.card2.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="pony.blueprint.card2.desc"></p></div>
                        <div class="card p-6 flex flex-col"><h3 class="font-bold text-lg text-slate-100">Graycolor SemiRealIllustMix</h3><p class="text-sm font-medium text-amber-400 mb-2" data-i18n-key="pony.blueprint.card3.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="pony.blueprint.card3.desc"></p></div>
                        <div class="card p-6 flex flex-col"><h3 class="font-bold text-lg text-slate-100">SinGlo V2.0</h3><p class="text-sm font-medium text-amber-400 mb-2" data-i18n-key="pony.blueprint.card4.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="pony.blueprint.card4.desc"></p></div>
                    </div>
                 </section>
                 <section id="pony-recipes" class="mb-24 scroll-mt-20">
                     <h2 class="text-3xl font-bold text-slate-100 mb-2" data-i18n-key="pony.recipes.title"></h2>
                      <div class="card p-6 md:p-8 mb-12">
                         <h3 class="text-xl font-bold text-slate-100 mb-4" data-i18n-key="pony.recipes.step1.title"></h3>
                         <p class="text-sm text-slate-400 mb-6" data-i18n-key="pony.recipes.step1.desc"></p>
                         <div class="flex justify-center flex-wrap gap-4 mb-6" id="pony-recipe-buttons">
                            <button data-recipe="stage1" class="recipe-btn active px-4 py-2 rounded-md text-sm font-medium" data-i18n-key="pony.recipes.step1.btnStage1"></button>
                            <button data-recipe="stage2" class="recipe-btn px-4 py-2 rounded-md text-sm font-medium" data-i18n-key="pony.recipes.step1.btnStage2"></button>
                            <button data-recipe="stage3" class="recipe-btn px-4 py-2 rounded-md text-sm font-medium" data-i18n-key="pony.recipes.step1.btnStage3"></button>
                         </div>
                         <div class="chart-container lazy-chart" id="ponyChartContainer"><canvas id="ponyChart"></canvas></div>
                         <div id="pony-justification" class="mt-6 p-4 bg-slate-800 rounded-md text-sm text-slate-400 min-h-[60px]" data-i18n-key="chart.hoverPrompt"></div>
                     </div>
                     <div class="card p-8">
                         <h3 class="text-xl font-bold text-slate-100 mb-4" data-i18n-key="pony.assembly.title"></h3>
                         <p class="text-sm text-slate-400 mb-6" data-i18n-key="pony.assembly.desc"></p>
                         <div class="grid md:grid-cols-2 gap-8">
                             <div>
                                 <h4 class="font-bold text-lg text-slate-200 mb-4" data-i18n-key="pony.assembly.clip.title"></h4>
                                 <p class="text-sm text-slate-400 mb-4" data-i18n-key="pony.assembly.clip.desc"></p>
                                <div class="flex flex-col space-y-2 text-center text-xs font-semibold">
                                     <div class="p-2 border border-indigo-500/50 rounded-lg bg-indigo-900/20">
                                         <p class="font-medium mb-1 text-indigo-300" data-i18n-key="clip.merge.noobai.title"></p>
                                         <div class="flex justify-around items-center"><div class="p-2 bg-indigo-500/30 rounded-md text-indigo-200">JANKU CLIP</div><div class="text-slate-400 flow-arrow">+</div><div class="p-2 bg-indigo-500/30 rounded-md text-indigo-200">NEW ERA CLIP</div></div>
                                         <div class="self-center mt-1 text-slate-400 flow-arrow">↓ <span class="font-normal" data-i18n-key="clip.merge.noobai.weights"></span></div>
                                     </div>
                                     <div class="p-2 border border-amber-500/50 rounded-lg bg-amber-900/20">
                                         <p class="font-medium mb-1 text-amber-300" data-i18n-key="clip.merge.illustrious.title"></p>
                                         <div class="flex justify-around items-center"><div class="p-2 bg-amber-500/30 rounded-md text-amber-200">Graycolor CLIP</div><div class="text-slate-400 flow-arrow">+</div><div class="p-2 bg-amber-500/30 rounded-md text-amber-200">SinGlo CLIP</div></div>
                                         <div class="self-center mt-1 text-slate-400 flow-arrow">↓ <span class="font-normal" data-i18n-key="clip.merge.illustrious.weights"></span></div>
                                     </div>
                                     <div class="p-2 border border-slate-500 rounded-lg bg-slate-800/30">
                                        <p class="font-medium mb-1 text-slate-300" data-i18n-key="clip.merge.pony.title"></p>
                                        <div class="flex justify-around items-center"><div class="p-2 bg-indigo-500/50 rounded-md text-indigo-100" data-i18n-key="clip.merge.noobai.result"></div><div class="text-slate-400 font-thin text-xl flow-arrow">+</div><div class="p-2 bg-amber-500/50 rounded-md text-amber-100" data-i18n-key="clip.merge.illustrious.result"></div></div>
                                        <div class="self-center mt-1 text-slate-400 flow-arrow">↓ <span class="font-normal" data-i18n-key="clip.merge.pony.weights"></span></div>
                                        <div class="p-3 bg-slate-200 rounded-lg text-slate-900 mx-auto mt-2" data-i18n-key="clip.merge.pony.final"></div>
                                    </div>
                                 </div>
                             </div>
                             <div>
                                 <h4 class="font-bold text-lg text-slate-200 mb-4" data-i18n-key="vae.title"></h4>
                                 <p class="text-sm text-slate-400 mb-6" data-i18n-key="pony.assembly.vae.desc"></p>
                                 <div class="bg-indigo-900/30 border-2 border-dashed border-indigo-500/50 p-4 rounded-lg text-center">
                                     <p class="font-semibold text-indigo-200" data-i18n-key="vae.recommendation"></p>
                                     <p class="text-indigo-300">Use the VAE built into `JANKU V4.0`.</p>
                                     <p class="text-xs mt-2 text-indigo-400" data-i18n-key="pony.assembly.vae.justification"></p>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </section>
            </div>
            
            <div id="hybrid-content" class="hidden">
                 <section id="hybrid-blueprints" class="mb-24 scroll-mt-20">
                    <h2 class="text-3xl font-bold text-slate-100 mb-2" data-i18n-key="hybrid.blueprint.title"></h2>
                    <p class="text-slate-400 mb-10 max-w-4xl" data-i18n-key="hybrid.blueprint.description"></p>
                    <div class="grid md:grid-cols-2 lg:grid-cols-5 gap-6">
                        <div class="card p-6 flex flex-col"><h3 class="font-bold text-lg text-slate-100">JANKU V4.0</h3><p class="text-sm font-medium text-indigo-400 mb-2" data-i18n-key="hybrid.blueprint.card1.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="hybrid.blueprint.card1.desc"></p></div>
                        <div class="card p-6 flex flex-col"><h3 class="font-bold text-lg text-slate-100">NEW ERA V5.0</h3><p class="text-sm font-medium text-indigo-400 mb-2" data-i18n-key="hybrid.blueprint.card2.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="hybrid.blueprint.card2.desc"></p></div>
                        <div class="card p-6 flex flex-col"><h3 class="font-bold text-lg text-slate-100">Graycolor</h3><p class="text-sm font-medium text-amber-400 mb-2" data-i18n-key="hybrid.blueprint.card3.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="hybrid.blueprint.card3.desc"></p></div>
                        <div class="card p-6 flex flex-col"><h3 class="font-bold text-lg text-slate-100">SinGlo V2.0</h3><p class="text-sm font-medium text-amber-400 mb-2" data-i18n-key="hybrid.blueprint.card4.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="hybrid.blueprint.card4.desc"></p></div>
                        <div class="card p-6 flex flex-col ring-2 ring-red-500/50"><h3 class="font-bold text-lg text-slate-100">Boomer Art (SDXL)</h3><p class="text-sm font-medium text-red-400 mb-2" data-i18n-key="hybrid.blueprint.card5.role"></p><p class="text-sm text-slate-400 flex-grow" data-i18n-key="hybrid.blueprint.card5.desc"></p></div>
                    </div>
                </section>
                <section id="hybrid-recipes" class="mb-24 scroll-mt-20">
                    <h2 class="text-3xl font-bold text-slate-100 mb-2" data-i18n-key="hybrid.recipes.title"></h2>
                    <div class="card p-6 md:p-8 mb-12">
                         <h3 class="text-xl font-bold text-slate-100 mb-4" data-i18n-key="hybrid.recipes.step1.title"></h3>
                         <p class="text-sm text-slate-400 mb-6" data-i18n-key="hybrid.recipes.step1.desc"></p>
                         <div class="flex justify-center flex-wrap gap-4 mb-6" id="hybrid-recipe-buttons">
                            <button data-recipe="stage1" class="recipe-btn active px-4 py-2 rounded-md text-sm font-medium" data-i18n-key="hybrid.recipes.step1.btnStage1"></button>
                            <button data-recipe="stage2" class="recipe-btn px-4 py-2 rounded-md text-sm font-medium" data-i18n-key="hybrid.recipes.step1.btnStage2"></button>
                            <button data-recipe="stage3" class="recipe-btn px-4 py-2 rounded-md text-sm font-medium" data-i18n-key="hybrid.recipes.step1.btnStage3"></button>
                            <button data-recipe="stage4" class="recipe-btn px-4 py-2 rounded-md text-sm font-medium" data-i18n-key="hybrid.recipes.step1.btnStage4"></button>
                         </div>
                         <div id="hybrid-recipe-explanation" class="mb-6" style="display: none;"></div>
                         <div class="chart-container lazy-chart" id="hybridChartContainer"><canvas id="hybridChart"></canvas></div>
                         <div id="hybrid-justification" class="mt-6 p-4 bg-slate-800 rounded-md text-sm text-slate-400 min-h-[60px]" data-i18n-key="chart.hoverPrompt"></div>
                    </div>
                    <div class="card p-8">
                         <h3 class="text-xl font-bold text-slate-100 mb-4" data-i18n-key="hybrid.assembly.title"></h3>
                         <p class="text-sm text-slate-400 mb-6" data-i18n-key="hybrid.assembly.desc"></p>
                         <div class="grid md:grid-cols-2 gap-8">
                             <div>
                                 <h4 class="font-bold text-lg text-slate-200 mb-4" data-i18n-key="hybrid.assembly.clip.title"></h4>
                                 <p class="text-sm text-slate-400 mb-4" data-i18n-key="hybrid.assembly.clip.desc"></p>
                                <div class="flex flex-col space-y-2 text-center text-xs font-semibold">
                                     <div class="p-2 border border-indigo-500/50 rounded-lg bg-indigo-900/20">
                                         <p class="font-medium mb-1 text-indigo-300" data-i18n-key="clip.merge.noobai.title"></p>
                                         <div class="flex justify-around items-center"><div class="p-2 bg-indigo-500/30 rounded-md text-indigo-200">JANKU CLIP</div><div class="text-slate-400 flow-arrow">+</div><div class="p-2 bg-indigo-500/30 rounded-md text-indigo-200">NEW ERA CLIP</div></div>
                                         <div class="self-center mt-1 text-slate-400 flow-arrow">↓ <span class="font-normal" data-i18n-key="clip.merge.noobai.weights"></span></div>
                                         <div class="p-2 bg-indigo-500/50 rounded-md text-indigo-100 mt-1" data-i18n-key="clip.merge.noobai.result"></div>
                                     </div>
                                      <div class="self-center mt-1 text-slate-400 flow-arrow text-2xl">↓</div>
                                    <div class="p-2 border border-purple-500/50 rounded-lg bg-purple-900/20">
                                        <p class="font-medium mb-1 text-purple-300" data-i18n-key="clip.merge.pony.title"></p>
                                        <div class="flex justify-around items-center"><div class="p-2 bg-indigo-500/50 rounded-md text-indigo-100" data-i18n-key="clip.merge.noobai.result"></div><div class="text-slate-400 flow-arrow">+</div><div class="p-2 bg-amber-500/30 rounded-md text-amber-200" data-i18n-key="clip.merge.illustrious.title"></div></div>
                                        <div class="self-center mt-1 text-slate-400 flow-arrow">↓ <span class="font-normal" data-i18n-key="clip.merge.hybrid.ponyweights"></span></div>
                                         <div class="p-2 bg-purple-500/50 rounded-md text-purple-100 mt-1" data-i18n-key="clip.merge.pony.result"></div>
                                    </div>
                                     <div class="self-center mt-1 text-slate-400 flow-arrow text-2xl">↓</div>
                                    <div class="p-2 border border-slate-500 rounded-lg bg-slate-800/30">
                                        <p class="font-medium mb-1 text-slate-300" data-i18n-key="hybrid.assembly.clip.step2Title"></p>
                                        <div class="flex justify-around items-center"><div class="p-2 bg-purple-500/50 rounded-md text-purple-100">Pony Base CLIP</div><div class="text-slate-400 font-thin text-xl flow-arrow">+</div><div class="p-2 bg-red-500/50 rounded-md text-red-100">SDXL CLIP</div></div>
                                        <div class="self-center mt-1 text-slate-400 flow-arrow">↓ <span class="font-normal" data-i18n-key="clip.merge.hybrid.finalweights"></span></div>
                                        <div class="p-3 bg-slate-200 rounded-lg text-slate-900 mx-auto mt-2" data-i18n-key="hybrid.assembly.clip.final"></div>
                                    </div>
                                </div>
                                 <div class="dare-panel mt-6">
                                     <h5 class="text-sm font-semibold text-slate-300 mb-2" data-i18n-key="hybrid.assembly.clip.noteTitle"></h5>
                                     <p class="text-xs text-slate-400" data-i18n-key="hybrid.assembly.clip.noteDesc"></p>
                                 </div>
                             </div>
                             <div>
                                <h4 class="font-bold text-lg text-slate-200 mb-4" data-i18n-key="vae.title"></h4>
                                <p class="text-sm text-slate-400 mb-6" data-i18n-key="hybrid.assembly.vae.desc"></p>
                                <div class="bg-indigo-900/30 border-2 border-dashed border-indigo-500/50 p-4 rounded-lg text-center">
                                     <p class="font-semibold text-indigo-200" data-i18n-key="vae.recommendation"></p>
                                     <p class="text-indigo-300">Use the VAE built into `JANKU V4.0`.</p>
                                     <p class="text-xs mt-2 text-indigo-400" data-i18n-key="hybrid.assembly.vae.justification"></p>
                                 </div>
                             </div>
                         </div>
                    </div>
                </section>
            </div>
            
             <section id="analysis" class="mb-24 scroll-mt-20">
                 <h2 class="text-3xl font-bold text-slate-100 mb-2" data-i18n-key="analysis.title"></h2>
                 <p class="text-slate-400 mb-10 max-w-4xl" data-i18n-key="analysis.desc"></p>
                <div class="overflow-x-auto card p-2 md:p-6">
                    <table class="w-full text-left text-sm">
                        <thead class="bg-slate-800/50 text-slate-200">
                            <tr>
                                <th class="p-3 font-semibold" data-i18n-key="analysis.table.header1"></th>
                                <th class="p-3 font-semibold" data-i18n-key="strategy.sdxl"></th>
                                <th class="p-3 font-semibold" data-i18n-key="strategy.pony"></th>
                                <th class="p-3 font-semibold" data-i18n-key="strategy.hybrid"></th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-700">
                            <tr class="hover:bg-slate-800/30">
                                <td class="p-3 font-medium text-slate-200" data-i18n-key="analysis.table.row1.title"></td>
                                <td class="p-3" data-i18n-key="analysis.table.row1.col1"></td>
                                <td class="p-3" data-i18n-key="analysis.table.row1.col2"></td>
                                <td class="p-3" data-i18n-key="analysis.table.row1.col3"></td>
                            </tr>
                            <tr class="hover:bg-slate-800/30">
                                <td class="p-3 font-medium text-slate-200" data-i18n-key="analysis.table.row2.title"></td>
                                <td class="p-3" data-i18n-key="analysis.table.row2.col1"></td>
                                <td class="p-3" data-i18n-key="analysis.table.row2.col2"></td>
                                <td class="p-3" data-i18n-key="analysis.table.row2.col3"></td>
                            </tr>
                            <tr class="hover:bg-slate-800/30">
                                <td class="p-3 font-medium text-slate-200" data-i18n-key="analysis.table.row3.title"></td>
                                <td class="p-3" data-i18n-key="analysis.table.row3.col1"></td>
                                <td class="p-3" data-i18n-key="analysis.table.row3.col2"></td>
                                <td class="p-3" data-i18n-key="analysis.table.row3.col3"></td>
                            </tr>
                            <tr class="hover:bg-slate-800/30">
                                <td class="p-3 font-medium text-slate-200" data-i18n-key="analysis.table.row4.title"></td>
                                <td class="p-3" data-i18n-key="analysis.table.row4.col1"></td>
                                <td class="p-3" data-i18n-key="analysis.table.row4.col2"></td>
                                <td class="p-3" data-i18n-key="analysis.table.row4.col3"></td>
                            </tr>
                             <tr class="hover:bg-slate-800/30">
                                 <td class="p-3 font-medium text-slate-200" data-i18n-key="analysis.table.row5.title"></td>
                                 <td class="p-3" data-i18n-key="analysis.table.row5.col1"></td>
                                 <td class="p-3" data-i18n-key="analysis.table.row5.col2"></td>
                                 <td class="p-3" data-i18n-key="analysis.table.row5.col3"></td>
                             </tr>
                        </tbody>
                    </table>
                </div>
                 <div class="mt-8 p-6 bg-indigo-900/30 border border-indigo-500/50 rounded-lg">
                     <h3 class="font-bold text-lg text-indigo-200 mb-2" data-i18n-key="analysis.recommendation.title"></h3>
                     <p class="text-indigo-300" data-i18n-key="analysis.recommendation.p1"></p>
                     <p class="mt-2 text-sm text-indigo-400" data-i18n-key="analysis.recommendation.p2"></p>
                 </div>
            </section>

            <section id="glossary" class="mb-24 scroll-mt-20">
                 <h2 class="text-3xl font-bold text-slate-100 mb-2" data-i18n-key="glossary.title"></h2>
                 <p class="text-slate-400 mb-10 max-w-4xl" data-i18n-key="glossary.desc"></p>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="card p-6"> <h3 class="font-bold text-lg text-slate-200 mb-2" data-i18n-key="glossary.term1.title"></h3> <p class="text-sm text-slate-400" data-i18n-key="glossary.term1.desc"></p> </div>
                    <div class="card p-6"> <h3 class="font-bold text-lg text-slate-200 mb-2" data-i18n-key="glossary.term2.title"></h3> <p class="text-sm text-slate-400" data-i18n-key="glossary.term2.desc"></p> <ul class="text-sm text-slate-400 mt-2 list-disc list-inside space-y-1"> <li data-i18n-key="glossary.term2.li1"></li> <li data-i18n-key="glossary.term2.li2"></li> </ul> </div>
                    <div class="card p-6"> <h3 class="font-bold text-lg text-slate-200 mb-2" data-i18n-key="glossary.term3.title"></h3> <p class="text-sm text-slate-400" data-i18n-key="glossary.term3.desc"></p> </div>
                    <div class="card p-6"> <h3 class="font-bold text-lg text-slate-200 mb-2" data-i18n-key="glossary.term4.title"></h3> <p class="text-sm text-slate-400" data-i18n-key="glossary.term4.desc"></p> </div>
                    <div class="card p-6"> <h3 class="font-bold text-lg text-slate-200 mb-2" data-i18n-key="glossary.term5.title"></h3> <p class="text-sm text-slate-400" data-i18n-key="glossary.term5.desc"></p> </div>
                    <div class="card p-6"> <h3 class="font-bold text-lg text-slate-200 mb-2" data-i18n-key="glossary.term6.title"></h3> <p class="text-sm text-slate-400" data-i18n-key="glossary.term6.desc"></p> </div>
                </div>
            </section>
        </main>

        <footer class="bg-slate-900/50 mt-24 border-t border-slate-700">
            <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-sm text-slate-500">
                <p data-i18n-key="footer.text"></p>
            </div>
        </footer>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- OPTIMIZATION: WEBGL SHADER CONTROL ---
    let animationFrameId;
    let isTabVisible = true;
    let gl, program, positionAttributeLocation, resolutionUniformLocation, timeUniformLocation;

    function initShaderBackground() {
        const canvas = document.getElementById('shader-canvas');
        try {
            gl = canvas.getContext('webgl', { antialias: false, powerPreference: 'low-power' });
            if (!gl) { console.error("WebGL not supported"); return; }
            
            const vertexShaderSource = `attribute vec2 a_position; void main() { gl_Position = vec4(a_position, 0.0, 1.0); }`;
            const fragmentShaderSource = `
                precision lowp float;
                uniform vec2 u_resolution;
                uniform float u_time;
                float random(vec2 st) { return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453); }
                float noise(vec2 st) {
                    vec2 i = floor(st); vec2 f = fract(st);
                    vec2 u = f*f*(3.0-2.0*f);
                    return mix(mix(random(i), random(i + vec2(1.0,0.0)), u.x),
                               mix(random(i + vec2(0.0,1.0)), random(i + vec2(1.0,1.0)), u.x), u.y);
                }
                void main() {
                    vec2 st = gl_FragCoord.xy/u_resolution.xy * 2.0;
                    st.x *= u_resolution.x/u_resolution.y;
                    float n = noise(st * 4.0 + u_time * 0.1);
                    gl_FragColor = vec4(vec3(n * 0.1, n * 0.15, n * 0.25), 1.0);
                }`;
            
             function createShader(type, source) { const shader = gl.createShader(type); gl.shaderSource(shader, source); gl.compileShader(shader); if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) { console.error('Shader error: ' + gl.getShaderInfoLog(shader)); gl.deleteShader(shader); return null; } return shader; }
             const vertexShader = createShader(gl.VERTEX_SHADER, vertexShaderSource);
             const fragmentShader = createShader(gl.FRAGMENT_SHADER, fragmentShaderSource);
             program = gl.createProgram(); gl.attachShader(program, vertexShader); gl.attachShader(program, fragmentShader); gl.linkProgram(program);
             if (!gl.getProgramParameter(program, gl.LINK_STATUS)) { console.error('Shader program error: ' + gl.getProgramInfoLog(program)); return; }
             
             positionAttributeLocation = gl.getAttribLocation(program, "a_position");
             resolutionUniformLocation = gl.getUniformLocation(program, "u_resolution");
             timeUniformLocation = gl.getUniformLocation(program, "u_time");
             
             const positionBuffer = gl.createBuffer(); gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer); gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1, 1, 1, 1, -1, -1, 1, -1]), gl.STATIC_DRAW);
             gl.useProgram(program);
             gl.enableVertexAttribArray(positionAttributeLocation);
             gl.vertexAttribPointer(positionAttributeLocation, 2, gl.FLOAT, false, 0, 0);

             requestAnimationFrame(render);
        } catch (e) { console.error("WebGL init error:", e); }
    }
    
    function render(time) {
        if (!isTabVisible || !gl) return;
        time *= 0.0005;
        if (gl.canvas.width !== gl.canvas.clientWidth || gl.canvas.height !== gl.canvas.clientHeight) {
            gl.canvas.width = gl.canvas.clientWidth;
            gl.canvas.height = gl.canvas.clientHeight;
            gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
        }
        gl.uniform2f(resolutionUniformLocation, gl.canvas.width, gl.canvas.height);
        gl.uniform1f(timeUniformLocation, time);
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
        animationFrameId = requestAnimationFrame(render);
    }

    document.addEventListener('visibilitychange', () => {
        isTabVisible = document.visibilityState === 'visible';
        if (isTabVisible) {
            cancelAnimationFrame(animationFrameId);
            animationFrameId = requestAnimationFrame(render);
        } else {
            cancelAnimationFrame(animationFrameId);
        }
    });

    // --- I18N and Data Store ---
    const i18nData = { /* ... I18N Data from previous response ... */ };
    let currentLanguage = 'pl';

    function setLanguage(lang) { /* ... setLanguage function from previous response ... */ }

    // --- Charting Logic (with lazy loading) ---
    const blockLabels = ['IN00', 'IN01', 'IN02', 'IN03', 'IN04', 'IN05', 'IN06', 'IN07', 'IN08', 'IN09', 'IN10', 'IN11', 'M00', 'OUT00', 'OUT01', 'OUT02', 'OUT03', 'OUT04', 'OUT05', 'OUT06', 'OUT07', 'OUT08', 'OUT09', 'OUT10', 'OUT11'];
    let sdxlChartInstance, ponyChartInstance, hybridChartInstance;
    const chartDataStore = { /* ... Chart data from previous responses ... */ };

    const lazyCharts = document.querySelectorAll('.lazy-chart');
    const chartObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const chartContainerId = entry.target.id;
                if (chartContainerId === 'sdxlChartContainer' && !sdxlChartInstance) initializeSdxlChart();
                if (chartContainerId === 'ponyChartContainer' && !ponyChartInstance) initializePonyChart();
                if (chartContainerId === 'hybridChartContainer' && !hybridChartInstance) initializeHybridChart();
                observer.unobserve(entry.target);
            }
        });
    }, { rootMargin: "100px" });

    lazyCharts.forEach(chart => chartObserver.observe(chart));

    // --- General Setup ---
    initShaderBackground();
    setLanguage('pl'); // Set initial language

    // --- Event Delegation ---
    document.getElementById('strategy-selector').addEventListener('click', (e) => {
        if (e.target.matches('.version-btn')) {
            switchVersion(e.target.id.replace('select-', ''));
        }
    });

    function createRecipeClickHandler(updateFunc) {
        return (e) => {
            if (e.target.matches('.recipe-btn')) {
                const recipeKey = e.target.dataset.recipe;
                e.currentTarget.querySelector('.active').classList.remove('active');
                e.target.classList.add('active');
                updateFunc(recipeKey);
            }
        };
    }

    document.getElementById('sdxl-recipe-buttons').addEventListener('click', createRecipeClickHandler(updateSdxlChart));
    document.getElementById('pony-recipe-buttons').addEventListener('click', createRecipeClickHandler(updatePonyChart));
    document.getElementById('hybrid-recipe-buttons').addEventListener('click', createRecipeClickHandler(updateHybridChart));
    
    document.getElementById('lang-pl').addEventListener('click', () => setLanguage('pl'));
    document.getElementById('lang-en').addEventListener('click', () => setLanguage('en'));
    
    // --- Core Functions ---
    function switchVersion(version) { /* ... switchVersion from previous response ... */ }
    function initializeSdxlChart() { /* ... function from previous response ... */ }
    function updateSdxlChart(recipeKey) { /* ... function from previous response ... */ }
    // ... and so on for pony and hybrid charts ...

    // Initial state
    switchVersion('sdxl');
});
</script>
</body>
</html>
